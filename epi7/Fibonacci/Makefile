#====================================================================================
# 1. 变量定义
#====================================================================================

ifndef CC
	CC = gcc
endif

ifndef CFLAGS
	CFLAGS = -Wall -g -std=c11
endif

SRCS := $(wildcard *.c)
OBJS := $(patsubst %.c,%.o, $(SRCS))
HDRS := $(wildcard *.h)

TARGET = Fibonacci

#====================================================================================
# 2. 编译和链接规则
#====================================================================================

.PHONY: all
all: $(TARGET)

$(TARGET): $(OBJS)
	$(CC) $(CFLAGS) -o $@ $^

%.o: %.c $(HDRS)
	$(CC) $(CFLAGS) -c $< -o $@ 
#====================================================================================
# 3. 清理规则
#===================================================================================

.PHONY: clean
clean:
	rm -f $(TARGET) $(OBJS)
